# xv6

xv6的makefile中更改编译选项多核数量为1，可以在调试过程中避免并行的问题，可以通过命令把所有文件的编译选项打印出来。在IDE(VScode)中调试xv6代码会很方便(切换回gdb调试要重新设置)，IDE中如果遇到定义无法跳转同样需要设置，改进工具对阅读大工程(xv6)十分有帮助。[VScode调试xv6](https://zhuanlan.zhihu.com/p/501901665)

在x86-64架构下的系统调用是syscall，在risc-v架构下的系统调用是ecall。操作系统上的程序会不断地执行三类操作，一是load/store；二是reg运算；三是系统调用。操作系统所使用的寄存器是比用户态应用程序使用的寄存器是要多一些的。操作系统和操作系统上的程序都像是一个状态机，怎么保证状态机运行不卡在死循环上，可以加入定时中断机制。那么硬件中断，代码切换到操作系统，进程间切换在代码层面是怎么实现的(以xv6为例)？

**RTFSC** (Read The Fucking Source Code), 出自Linux之父Linus Torvalds在Linux中的注解, 生动形象的体现了阅读源代码的艰难和重要。他曾说过的经典语录还有 Talk is cheap, show me the code。

用户态的协程类似于操作系统的上下文切换。